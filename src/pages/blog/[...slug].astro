---
import { type CollectionEntry, getCollection } from "astro:content";
import BlogPost from "../../layouts/BlogPost.astro";
import { calculateReadingTime } from "../../utils/calculate-reading-time";

const { slug } = Astro.params;

const posts = (await getCollection("blog")) as Array<CollectionEntry<"blog">>;
const post = posts.find((p) => p.slug === slug)!;

type Props = CollectionEntry<"blog">;

const { Content } = await post.render();
const readingTime = calculateReadingTime(post.body);
---

<BlogPost {...post.data} readingTime={readingTime}>
  <Content />
</BlogPost>
